var io=function(){io=null;var t=function(){var t=this;this.socket_data={},this.is_connected=!1;var e=function(){t.socket=new WebSocket("ws://{{req.headers.host}}{{req.baseUrl}}"),t.socket.onopen=function(){t.is_connected=!0,t.socket_data.connected&&t.socket_data.connected.call(null)},t.socket.onmessage=function(e){var n=JSON.parse(e.data);t.socket_data[n.command]&&t.socket_data[n.command].call(null,n.data)},t.socket.onclose=function(){t.is_connected=!1,t.socket_data.disconnected&&t.socket_data.disconnected.call(null)}};setInterval(function(){t.is_connected||e()},5e3),e()};return t.prototype.on=function(t,e){this.socket_data[t]=e},t.prototype.trigger=function(t,e){var self=this;setTimeout(function(){self.socket&&self.socket.send(JSON.stringify({command:t,data:e}))},100)},new t};